---
title: AWS VPC: Virtual Private Cloud で Web アプリケーションを保護する
description: 
published: true
date: 2023-02-01T04:44:20.558Z
tags: 
editor: markdown
dateCreated: 2023-02-01T04:44:16.691Z
---

> この記事は **Google Cloud Translation APIを使用した自動翻訳**です。
いくつかの文書は原文を読むのに良いかもしれません。{.is-info}

- [AWS VPC: Securing a Web Application with Virtual Private Clouds***English** version of this document is available*](/en/Knowledge-base/Cloud/aws-vpc-securing-a-web-application-with-virtual-private-clouds)
{.links-list}



# AWS VPC: 仮想プライベートクラウドによるウェブアプリケーションの保護

AWS VPCは、クラウドからウェブアプリケーションを保護するための重要なツールです。開発者はVPCを作成して、パブリックインターネットからWebアプリケーションを分離する仮想プライベートネットワークを作成できます。これにより、アプリケーションに入ってくるトラフィックを制御し、承認されたユーザーだけがアクセスできるようになります。

この記事では、AWS VPC を使用してウェブアプリケーションを保護する方法について説明します。次のトピックを取り上げます。

- VPCの作成
- セキュリティグループの設定
- NATゲートウェイの設定
- VPC設定テスト

## VPCの作成

VPCでWebアプリケーションを保護する最初のステップは、VPC自体を作成することです。これを行うには、AWSマネジメントコンソール、AWSコマンドラインインターフェイス（CLI）、またはAWS SDKを使用できます。

AWSマネジメントコンソールにログインしたら、VPCサービスに移動します。次に、左側のナビゲーションパネルで[Your VPCs]をクリックします。

![AWS VPC コンソール](https://i.imgur.com/p0lw9oG.png)

「Your VPCs」ページで、「Create VPC」ボタンをクリックします。

![VPC作成](https://i.imgur.com/7Dm7Ncu.png)

「Create VPC」ページで、次の設定を構成する必要があります。

- **名前タグ**：VPCの名前。あなたが好きなものにすることができます。
- **CIDRブロック**：VPCに割り当てるIPアドレスの範囲。作業するIPアドレス範囲を提供する/ 16ネットワークを使用することをお勧めします。
- **テナンシー**：デフォルトでは、VPCは共有テナンシーとして作成されます。つまり、複数の AWS アカウントで同じ物理リソースを使用できます。 VPCを分離したい場合は、「専用」テナンシーオプションを選択できます。追加料金が課金されます。
- **IPv6 CIDRブロック**：オプションで、VPCに対してIPv6を有効にできます。これにより、使用するIPv6アドレス範囲が提供されます。
- **デフォルトサブネット**：サブネットはVPC内のIPアドレス範囲です。デフォルトでは、AWS はサブネットを作成します。独自のサブネットを作成したい場合は、後で作成できます。

「Create VPC」ボタンをクリックしてVPCを作成します。

## セキュリティグループの設定

VPCが作成されたら、セキュリティグループを設定する必要があります。セキュリティグループはVPCのファイアウォールとして機能します。これにより、VPCに入出力するトラフィックを制御できます。

セキュリティグループを作成するには、VPCコンソールの[セキュリティグループ]ページに移動します。次に、[セキュリティグループの作成]ボタンをクリックします。

![セキュリティグループの作成](https://i.imgur.com/vALDK5Y.png)

[セキュリティグループの作成]ページで、次の設定を構成する必要があります。

- **セキュリティグループ名**：セキュリティグループの名前。あなたが好きなものにすることができます。
- **説明**: セキュリティグループの説明です。あなたが好きなものにすることができます。
- **VPC**：このセキュリティグループに関連付けるVPCを選択します。

[セキュリティグループの作成]ボタンをクリックしてセキュリティグループを作成します。

次に、セキュリティグループにルールを追加する必要があります。これを行うには、[セキュリティグループ]ページに移動して、変更するセキュリティグループを選択します。次に、「インバウンドルールの編集」ボタンをクリックします。

![インバウンドルールの編集](https://i.imgur.com/rc9pWxv.png)

[インバウンドルールの編集]ページで、次のトラフィックのルールを追加する必要があります。

- SSH：バスチャンホストでポート22のトラフィックを許可します。バスチャンホストは、VPCへの接続に使用するEC2インスタンスです。
- HTTP：これはどこでもポート80のトラフィックを許可します。
- HTTPS：どこからでもポート443のトラフィックを許可します。

変更を保存するには、[ルールの保存]ボタンをクリックします。

## NATゲートウェイの設定

次のステップはNATゲートウェイを設定することです。 NATゲートウェイを使用すると、VPCからインターネットにアクセスできます。 VPCを介してインターネットトラフィックをルーティングすることもできます。

NATゲートウェイを作成するには、VPCコンソールの[NATゲートウェイ]ページに移動します。次に、「NATゲートウェイの作成」ボタンをクリックします。

![NAT ゲートウェイの作成](https://i.imgur.com/qY0Vn4I.png)

「NAT ゲートウェイの作成」ページで、次の設定を構成する必要があります。

- **NATゲートウェイ名**：NATゲートウェイの名前。あなたが好きなものにすることができます。
- **サブネット**：このNATゲートウェイに関連付けるサブネットを選択します。
- **Elastic IP**：このNATゲートウェイに関連付けるElastic IPを選択します。

「Create NAT Gateway」ボタンをクリックしてNATゲートウェイを作成します。

## VPC設定テスト

VPCを作成し、セキュリティグループとNATゲートウェイを設定したら、設定をテストできます。これを行うには、VPCでEC2インスタンスを起動する必要があります。

EC2インスタンスを起動するには、EC2コンソールで[インスタンス]ページに移動します。次に、[インスタンスの開始]ボタンをクリックします。

![インスタンス開始](https://i.imgur.com/9GYNgkO.png)

[Choose an Amazon Machine Image]ページで、Amazon Linux AMIを選択します。

![Amazon マシンイメージの選択] (https://i.imgur.com/pH7Ixha.png)

「インスタンスタイプの選択」ページで、t2.microインスタンスタイプを選択します。

![インスタンスタイプの選択](https://i.imgur.com/ukYNTyU.png)

[インスタンス詳細の構成]ページで、次の設定が構成されていることを確認します。

- **ネットワーク**：このインスタンスを起動するVPCを選択します。
- **サブネット**：このインスタンスを起動するサブネットを選択します。
- **パブリックIP自動割り当て**：「有効」オプションを選択します。

![インスタンス詳細の構成](https://i.imgur.com/Y0l4U6O.png)

「ストレージの追加」ページでデフォルト設定をそのままにして、「次へ：タグを追加」ボタンをクリックできます。

[タグの追加]ページでデフォルト設定をそのままにして、[次へ：セキュリティグループの設定]ボタンをクリックできます。

[セキュリティグループの設定]ページで、以前に作成したセキュリティグループを選択します。次に「レビューと開始」ボタンをクリックします。

「インスタンス開始の確認」ページで、「開始」ボタンをクリックします。

[既存のキーペアの選択または新しいキーペアの作成]ページで、使用するキーペアを選択します。次に「Launch Instances」ボタンをクリックします。

![キーペア選択](https://i.imgur.com/tGcWql8.png)

これで EC2 インスタンスが起動します。実行すると、SSHを使用して接続できます。

![EC2 インスタンスに接続](https://i.imgur.com/TGiuk72.png)

NATゲートウェイをテストするには、次のコマンドを使用してWebサイトをpingできます。

```
ping www.google.com
```

次のような出力が表示されます。

```
PING www.google.com (172.217.194.206) 56(84) bytes of data.
64 bytes from muc06s02-in-f14.1e100.net (172.217.194.206): icmp_seq=1 ttl=52 time=52.6 ms
64 bytes from muc06s02-in-f14.1e100.net (172.217.194.206): icmp_seq=2 ttl=52 time=52.5 ms
64 bytes from muc06s02-in-f14.1e100.net (172.217.194.206): icmp_seq=3 ttl=52 time=52.5 ms

--- www.google.com ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2002ms
rtt min/avg/max/mdev = 52.526/52.561/52.607/0.129 ms
```

セキュリティグループをテストするために、パブリックインターネットからWebアプリケーションにアクセスしようとすることができます。アクセスできないはずです。

##結論

この記事では、AWS VPC を使用してウェブアプリケーションを保護する方法について説明しました。私たちは次のトピックを扱いました。

- VPCの作成
- セキュリティグループの設定
- NATゲートウェイの設定
- VPC設定テスト

この記事の手順に従って、Webアプリケーションが安全で承認されたユーザーのみがアクセスできることを確認できます。